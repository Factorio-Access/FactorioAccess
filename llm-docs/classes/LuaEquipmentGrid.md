# LuaEquipmentGrid

An equipment grid is for example the inside of a power armor.

## Methods

### can_move

Check whether moving an equipment would succeed.

**Parameters:**

- `equipment` `LuaEquipment`: The equipment to move
- `position` `EquipmentPosition`: Where to put it

**Returns:**

- `boolean`: 

### cancel_removal

Cancels removal for the given equipment.

**Parameters:**

- `equipment` `LuaEquipment`: 

**Returns:**

- `boolean`: If the equipment removal was successfully cancelled.

### clear

Clear all equipment from the grid, removing it without actually returning it.

**Parameters:**

- `by_player` `PlayerIdentification` _(optional)_: If provided, the action is done 'as' this player and [on_player_removed_equipment](runtime:on_player_removed_equipment) is triggered.

### count

Get the number of all or some equipment in this grid.

**Parameters:**

- `equipment` `EquipmentWithQualityID` _(optional)_: The equipment to count. If not specified, count all equipment.

**Returns:**

- `uint`: 

### find

Find equipment by name.

**Parameters:**

- `equipment` `EquipmentWithQualityID`: Prototype of the equipment to find.
- `search_ghosts` `boolean` _(optional)_: If ghosts inner equipment should be searched. Defaults to `false`

**Returns:**

- `LuaEquipment`: The first found equipment, or `nil` if equipment could not be found.

### get

Find equipment in the Equipment Grid colliding with this position.

**Parameters:**

- `position` `EquipmentPosition`: The position

**Returns:**

- `LuaEquipment`: The found equipment, or `nil` if equipment occupying the given position could not be found.

### get_contents

Get counts of all equipment in this grid.

**Returns:**

- ``EquipmentWithQualityCounts`[]`: List of all equipment in the grid.

### get_generator_energy

Total energy per tick generated by the equipment inside this grid.

**Parameters:**

- `quality` `QualityID` _(optional)_: 

**Returns:**

- `double`: 

### move

Move an equipment within this grid.

**Parameters:**

- `equipment` `LuaEquipment`: The equipment to move
- `position` `EquipmentPosition`: Where to put it

**Returns:**

- `boolean`: `true` if the equipment was successfully moved.

### order_removal

Marks the given equipment for removal. If the given equipment is a ghost it is removed.

**Parameters:**

- `equipment` `LuaEquipment`: 

**Returns:**

- `boolean`: If the equipment was successfully marked for removal (or in the case of a ghost; removed.)

### put

Insert an equipment into the grid.

**Parameters:**

- `by_player` `PlayerIdentification` _(optional)_: If provided the action is done 'as' this player and [on_player_placed_equipment](runtime:on_player_placed_equipment) is triggered.
- `ghost` `boolean` _(optional)_: If true, place the equipment as a ghost.
- `name` `EquipmentID`: Equipment prototype name
- `position` `EquipmentPosition` _(optional)_: Grid position to put the equipment in.
- `quality` `QualityID` _(optional)_: The quality, `nil` for any or if not provided `normal` is used.

**Returns:**

- `LuaEquipment`: The newly-added equipment, or `nil` if the equipment could not be added.

### revive

Revives the given equipment ghost if possible.

**Parameters:**

- `equipment` `LuaEquipment`: The equipment ghost to revive.

**Returns:**

- `LuaEquipment`: 

### take

Remove an equipment from the grid.

**Parameters:**

- `by_player` `PlayerIdentification` _(optional)_: If provided the action is done 'as' this player and [on_player_removed_equipment](runtime:on_player_removed_equipment) is triggered.
- `equipment` `LuaEquipment` _(optional)_: Take this exact equipment.
- `position` `EquipmentPosition` _(optional)_: Take the equipment that contains this position in the grid.

**Returns:**

- `SimpleItemStack`: The removed equipment, or `nil` if no equipment was removed.

### take_all

Remove all equipment from the grid.

**Parameters:**

- `by_player` `PlayerIdentification` _(optional)_: If provided, the action is done 'as' this player and [on_player_removed_equipment](runtime:on_player_removed_equipment) is triggered.

**Returns:**

- ``ItemWithQualityCounts`[]`: List of the equipment that has been removed.

## Attributes

### available_in_batteries

**Type:** `double` _(read-only)_

The total energy stored in all batteries in the equipment grid.

### battery_capacity

**Type:** `double` _(read-only)_

Total energy storage capacity of all batteries in the equipment grid.

### entity_owner

**Type:** `LuaEntity` _(read-only)_

The entity that this equipment grid is owned by (in some inventory or item stack.)

If the owning entity is a character owned by some player and the player is disconnected this will return `nil`.

### equipment

**Type:** ``LuaEquipment`[]` _(read-only)_

All the equipment in this grid.

### height

**Type:** `uint` _(read-only)_

Height of the equipment grid.

### inhibit_movement_bonus

**Type:** `boolean`

Whether this grid's equipment movement bonus is active.

### inventory_bonus

**Type:** `uint` _(read-only)_

The total amount of inventory bonus this equipment grid gives.

### max_shield

**Type:** `float` _(read-only)_

The maximum amount of shields this equipment grid has.

### max_solar_energy

**Type:** `double` _(read-only)_

Maximum energy per tick that can be created by all solar panels in the equipment grid on the current surface. Actual generated energy varies depending on the daylight levels.

### movement_bonus

**Type:** `double` _(read-only)_

The total amount of movement bonus this equipment grid gives.

Returns `0` if [LuaEquipmentGrid::inhibit_movement_bonus](runtime:LuaEquipmentGrid::inhibit_movement_bonus) is `false`.

### object_name

**Type:** `string` _(read-only)_

The class name of this object. Available even when `valid` is false. For LuaStruct objects it may also be suffixed with a dotted path to a member of the struct.

### player_owner

**Type:** `LuaPlayer` _(read-only)_

The player that this equipment grid is owned by (in some inventory or item stack.)

### prototype

**Type:** `LuaEquipmentGridPrototype` _(read-only)_



### shield

**Type:** `float` _(read-only)_

The amount of shields this equipment grid has.

### unique_id

**Type:** `uint` _(read-only)_

Unique identifier of this equipment grid.

### valid

**Type:** `boolean` _(read-only)_

Is this object valid? This Lua object holds a reference to an object within the game engine. It is possible that the game-engine object is removed whilst a mod still holds the corresponding Lua object. If that happens, the object becomes invalid, i.e. this attribute will be `false`. Mods are advised to check for object validity if any change to the game state might have occurred between the creation of the Lua object and its access.

### width

**Type:** `uint` _(read-only)_

Width of the equipment grid.

